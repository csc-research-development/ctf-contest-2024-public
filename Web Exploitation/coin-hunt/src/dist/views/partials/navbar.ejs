<nav
	class="sticky top-0 px-5 py-3 flex items-center justify-between bg-gray-950/90 backdrop-blur"
>
	<div class="flex items-center gap-5">
		<div>
			<a href="/" class="text-2xl font-bold">CoinHunt</a>
		</div>
		<ul class="flex items-center gap-2">
			<li>
				<a href="/" class="text-gray-300 hover:underline">Trade</a>
			</li>
			<li>
				<a href="/shop" class="text-gray-300 hover:underline">Shop</a>
			</li>
		</ul>
	</div>
	<div class="ml-auto flex items-center gap-3">
		<div class="font-medium flex items-center gap-1">
			<div class="text-3xl">ðŸ’°</div>
			<div>
				<div class="">
					Balance: $<%= !user.balance &&
					user.totalBalance.toLocaleString() %> (Cash: $<%=
					!user.balance && user.cash.toLocaleString() %>)
					<button onclick="location.reload()">ðŸ”„</button>
				</div>
				<div
					class="text-sm font-medium <%= user.assets[symbol] ? user.assets[symbol].changes > 0 ? 'text-green-500' : user.assets[symbol].changes == 0 ? 'text-gray-300' : 'text-red-500' : 'text-gray-300' %>"
				>
					<%= user.assets[symbol] && user.assets[symbol].changes >= 0
					? '+' : '' %><%= user.assets[symbol] ?
					user.assets[symbol].changes : 0 %>%
				</div>
			</div>
		</div>
		<button
			class="rounded-full border border-gray-500 px-5 py-1 hover:bg-gray-800"
			onclick="topup()"
		>
			Top Up
		</button>
	</div>
</nav>

<script>
	async function topup() {
		const amount = prompt('Enter amount')
		if (!amount) {
			return
		}

		const res = await fetch('/topup', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify({ amount: +amount }),
		})

		const data = await res.json()

		if (!res.ok) {
			alert(data.error)
			return
		}

		location.reload()
	}
</script>
